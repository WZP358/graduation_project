# 音频播放速度控制 - 快速入门指南

## 功能位置

在分析页面 `http://localhost:8082/analysis` 的右侧控制面板中，位于"缩放比例"下方。

## 为什么需要播放速度控制？

在音频分析和节拍识别时，正常速度播放可能导致：
- ❌ 节拍点太快，难以准确识别
- ❌ 双击添加节拍标记时容易错过精确位置
- ❌ 快速音乐中的细微节奏难以察觉

使用播放速度控制可以：
- ✅ 放慢播放速度（如0.5x），轻松识别每个节拍
- ✅ 保持音调不变，音质不失真
- ✅ 提高节拍标记的准确性

## 使用步骤

### 方法一：使用滑块（精确控制）

1. 在控制面板找到"播放速度"区域
2. 拖动滑块左右移动
3. 实时查看速度值变化（如 0.75x）
4. 播放音频即可听到速度效果

**速度范围：** 0.25x ~ 2.0x，步进 0.05

### 方法二：使用快捷按钮（快速切换）

点击预设速度按钮快速设置：

| 按钮 | 速度 | 适用场景 |
|-----|------|---------|
| 0.5x | 半速 | 精确识别复杂节拍 |
| 0.75x | 四分之三速 | 适合大多数音乐的节拍识别 |
| 1x | 正常速度 | 恢复原始播放速度 |
| 1.25x | 1.25倍 | 略快浏览 |
| 1.5x | 1.5倍 | 快速扫听全曲 |

**💡 智能高亮提示：**
- ✅ 点击按钮后，该按钮会变成**蓝色**，清晰显示当前速度
- ⚪ 拖动滑块到非预设速度时，所有按钮恢复白色
- 🔄 如果滑块刚好滑到预设速度（如恰好1.0），对应按钮会自动高亮

## 实际应用示例

### 场景1：添加节拍点

```
1. 设置速度为 0.5x
2. 点击"播放/暂停"开始播放
3. 仔细聆听每个节拍
4. 双击波形图在节拍位置添加标记
5. 或使用 w/a/s/d 键在当前播放位置添加节拍点
6. 完成后点击"保存节拍修改"
```

### 场景2：检查节拍准确性

```
1. 设置速度为 0.75x
2. 播放音频，观察已标记的节拍点
3. 节拍点应与音频完美对齐
4. 如有偏差，右键点击节拍点选择"删除"或使用键盘左右键调整
```

### 场景3：快速浏览

```
1. 设置速度为 1.5x
2. 快速播放，了解整体节奏感
3. 发现关键部分后，降低速度详细分析
```

### 场景4：精确微调（动态高亮演示）

```
1. 点击 "0.75x" 按钮（按钮变蓝）
2. 发现速度稍快，拖动滑块到 0.65x（所有按钮变白）
3. 觉得太慢，再拖回到 0.75x（0.75x按钮自动变蓝）
4. 或者点击 "0.5x" 按钮切换（0.5x按钮变蓝，其他变白）
```

## 技术细节

- **音调保持：** 启用了 `preservesPitch`，速度改变不会影响音高
- **实时调整：** 可在播放过程中随时调整速度，无需暂停
- **精确步进：** 滑块支持 0.05 的精确步进
- **浏览器兼容：** 支持所有现代浏览器（Chrome, Firefox, Edge, Safari）

## 快捷键配合使用

播放速度控制可以与以下快捷键配合使用：

- **w/a/s/d** - 在当前播放位置添加节拍点
- **左右箭头键** - 移动选中的节拍点（需先右键选中）
- **双击波形** - 在双击位置添加节拍点

## 注意事项

1. **速度范围限制**
   - 最小速度：0.25x（四分之一速）
   - 最大速度：2.0x（两倍速）
   - 超出此范围可能导致音质下降

2. **性能建议**
   - 大文件（>10MB）在极低速度（<0.3x）可能有轻微延迟
   - 建议优先使用快捷按钮中的预设速度

3. **保存提示**
   - 速度设置不会被保存，刷新页面后会恢复默认 1.0x
   - 但节拍标记会在点击"保存节拍修改"后永久保存

## 常见问题

**Q: 为什么改变速度后音调没有变化？**  
A: 这是正常的！系统启用了音调保持功能，确保速度变化不影响音高。

**Q: 可以在播放时调整速度吗？**  
A: 可以！速度调整会立即生效，无需暂停播放。

**Q: 速度设置会影响导出的音频吗？**  
A: 不会。速度控制只影响页面播放，不会改变原始音频文件。

**Q: 推荐使用什么速度进行节拍识别？**  
A: 对于大多数音乐，推荐使用 0.5x 或 0.75x，可以清晰听到每个节拍点。

## 开始使用

1. 打开分析页面：`http://localhost:8082/analysis`
2. 上传或选择一个音频文件
3. 在右侧控制面板找到"播放速度"
4. 尝试不同速度，找到最适合的识别速度
5. 开始添加节拍点！

---

**提示：** 初次使用建议从 0.5x 开始尝试，逐步适应不同速度的效果。

