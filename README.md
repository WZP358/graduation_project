# 基于信号处理的音频节拍自动识别平台

## 背景

​	音乐节拍自动识别是音频信号处理领域的重要研究方向，对于音乐分析、自动伴奏系统、音乐教育等领域具有重要意义。传统的节拍识别方法主要基于信号处理技术，而近年来随着深度学习的发展，基于神经网络的节拍识别方法也取得了显著进展。

​	当前，大多数音乐可视化平台如Audacity、Sonic Visualiser等虽然功能强大，但通常操作复杂，且缺乏专门的节拍自动识别功能。





## 核心问题

1. **手动标记的局限性**：现有系统依赖用户手动标记节拍点，这个过程耗时且主观性强，不同用户标记的结果可能存在差异。
2. **节拍数据的存储与管理**：需要设计合理的数据结构来存储节拍时刻数据，并实现高效的数据存取功能。
3. **自动识别算法的准确性**：如何选择合适的信号处理算法，实现高精度的节拍自动识别是一个技术挑战。
4. **可视化展示的完整性**：需要将自动识别的节拍点与原始波形图有机结合，提供直观的可视化效果。





## 对于解决核心问题的初步想法

1.  **模块化开发**：将系统分为数据收集、算法处理和可视化展示三大模块，便于单独开发和测试。
2.  **混合算法策略**：结合传统信号处理方法和机器学习方法，提高节拍识别的准确性和鲁棒性。
3.  **数据库设计优化**：设计专门的节拍数据表，存储音频文件与对应节拍时刻的关联关系。





## 算法使用

### 传统信号处理方法

1. **能量检测法(最简单的节拍检测方法)**：通过计算音频信号的短时能量来检测节拍点
2. **自相关函数法**：利用自相关函数检测信号的周期性
3. **频域分析法**：通过傅里叶变换分析频谱特征来识别节拍

### 机器学习方法

1. **卷积神经网络(CNN)**：用于提取音频特征
2. **递归神经网络(RNN)**：处理时间序列数据，捕捉节拍时序关系
3. **结合方法**：CNN+RNN混合模型，同时利用空间和时间特征





## 系统核心功能模块

|      模块名称      | 核心功能                                                     |
| :----------------: | :----------------------------------------------------------- |
| **音乐波形可视化** | - 使用WaveSurfer.js显示音频波形图<br/>- 支持频谱图(Spectrogram)显示 <br/>- 可以缩放和播放/暂停音频 |
|  **手动节拍标记**  | - 用户可以按键盘键(a, s, d, f)在音频播放时手动标记节拍点<br/>- 系统会自动计算每个节拍之间的时间间隔<br/>- 生成BPM(每分钟节拍数)数据 |
|  **节拍速度分析**  | - 计算音乐的节拍速度变化<br/>- 生成"速度-力度曲线"图表<br/>- 显示BPM随时间的变化趋势 |
|  **节拍数据存储**  | \- 存储音频文件名与节拍时刻的对应关系<br/>\- 提供节拍数据的增删改查接口<br/>\- 支持数据导入导出功能 |
|   **数据可视化**   | - 使用metrics-graphics库生成交互式图表<br/>- 显示节拍位置和对应的BPM值<br/>- 支持鼠标悬停查看详细数据 |
|    **系统管理**    | 用户管理、角色权限管理、操作日志。                           |
|  **自动节拍识别**  | \- 集成传统信号处理节拍识别算法<br/>\- 提供机器学习节拍识别模型<br/>\- 支持算法参数调整和效果对比 |
| **节拍可视化展示** | \- 从数据库读取节拍时刻数据<br/>\- 在波形图上标记节拍点位置<br/>\- 支持手动标记与自动识别结果的对比显示 |



## 数据库设计

### 节拍数据表 (BeatData)

|     字段名     |     类型     |          描述          |
| :------------: | :----------: | :--------------------: |
|       id       |  BIGINT(20)  |         主键ID         |
| audio_filename | VARCHAR(255) |       音频文件名       |
|   beat_times   |     TEXT     | 节拍时刻数组(JSON格式) |
|  create_time   |   DATETIME   |        创建时间        |
|  update_time   |   DATETIME   |        更新时间        |
|   created_by   |  BIGINT(20)  |       创建用户ID       |



### 相关用户信息表 (User)

|    **字段名**     |   **类型**   |        描述        |
| :---------------: | :----------: | :----------------: |
|        id         |     INT      | 用户ID(主键、自增) |
|       name        | VARCHAR(255) |       用户名       |
|     password      | VARCHAR(255) |        密码        |
|       email       | VARCHAR(255) |      电子邮箱      |
| registration_time |   DATETIME   |      注册时间      |
|    music_count    |     INT      |       音乐数       |
|  analysis_count   |     INT      |     分析记录数     |
|    view_count     |     INT      |      查看次数      |
|        bio        |     TEXT     |      个人介绍      |

说明：上表用于存储用户信息。



### 相关音乐信息表 (Music)

|     字段名     |     类型     |              说明              |
| :------------: | :----------: | :----------------------------: |
|       id       |     INT      |      音乐ID（主键、自增）      |
|      name      | VARCHAR(255) |              名称              |
|     author     | VARCHAR(255) |              作者              |
|  description   |     TEXT     |            内容介绍            |
| upload_user_id |     INT      | 上传用户ID（外键，关联用户表） |
|  upload_time   |   DATETIME   |            上传时间            |
|   is_private   |   BOOLEAN    |            是否私有            |
|   file_path    | VARCHAR(255) |    文件在服务器上的存放路径    |

说明：上表用于存储音乐记录信息



### 相关分析记录信息表 (AnalysisRecord)

|      字段名       |     类型     |          说明          |
| :---------------: | :----------: | :--------------------: |
|        id         |     INT      | 分析记录ID(主键、自增) |
|       name        | VARCHAR(255) |          名称          |
|     author_id     |     INT      |      作者ID(外键)      |
|    description    |     TEXT     |        内容介绍        |
| analyzed_music_id |     INT      |  所分析的音乐ID(外键)  |
|   analysis_time   |   DATETIME   |        分析时间        |
|    is_private     |   BOOLEAN    |        是否私有        |
|     file_path     | VARCHAR(255) | 文件所在服务器存放路径 |

说明: 上表用于存储分析记录信息。



## 技术栈

|     层次     |                    技术栈                    |
| :----------: | :------------------------------------------: |
|   **前端**   |    Vue.js + Vite + Element Plus +ECharts     |
|   **后端**   |          Spring Boot + MyBatis-Plus          |
|  **数据库**  |                 MySQL+ Redis                 |
| **音频处理** |        Web Audio API + Wavesurfer.js         |
| **算法实现** | Python + Librosa + TensorFlow/PyTorch (可选) |
|  **可视化**  |         MetricsGraphics.js + ECharts         |

## 





## 项目进展

- [ ] **音乐波形可视化**
- [ ] **手动节拍标记**
- [ ] **自动节拍识别**
- [ ] **节拍速度分析**
- [ ] **节拍数据存储**
- [ ] **节拍数据存储**
- [ ] **数据可视化**
- [ ] **节拍可视化展示**
- [ ] **系统管理**





